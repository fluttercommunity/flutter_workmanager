---
title: "Fetch Notifications"
description: "Check for new notifications and messages from your server in the background"
---

# Background Notification Fetching

Automatically check for new notifications, messages, and updates from your server, even when the app is closed.

## When to Use This

- Social media apps checking for new messages
- Email apps fetching new mail
- News apps checking for breaking news
- Chat applications checking for messages
- Any app that needs real-time updates

## Quick Implementation

```dart
@pragma('vm:entry-point') 
void callbackDispatcher() {
  Workmanager().executeTask((task, inputData) async {
    if (task == "fetch_notifications") {
      return await checkForNotifications();
    }
    return Future.value(false);
  });
}

Future<bool> checkForNotifications() async {
  try {
    final response = await http.get(
      Uri.parse('https://api.yourapp.com/notifications/check'),
      headers: {'Authorization': 'Bearer YOUR_TOKEN'},
    );

    if (response.statusCode == 200) {
      final data = json.decode(response.body);
      if (data['hasNew'] == true) {
        await _showLocalNotification(data['message']);
      }
      return true;
    }
    return false;
  } catch (e) {
    return false;
  }
}

void scheduleNotificationCheck() {
  Workmanager().registerPeriodicTask(
    "notification_check",
    "fetch_notifications", 
    frequency: Duration(minutes: 30),
    constraints: Constraints(
      networkType: NetworkType.connected,
    ),
  );
}
```

## Platform Considerations

<Tabs>
  <Tab title="Android">
    - Can check frequently (minimum 15 minutes)
    - Works reliably in background
    - Can show local notifications immediately
    - Respects battery optimization settings
  </Tab>
  
  <Tab title="iOS">
    - Limited execution time (~30 seconds)
    - May not run if app unused recently
    - iOS learns user patterns for scheduling
    - Background App Refresh must be enabled
  </Tab>
</Tabs>