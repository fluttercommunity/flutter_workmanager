---
title: Example - Cleanup Tasks
description: Example implementation for periodic cleanup tasks
---

# Example: Cleanup Tasks

Keep your app performing well by automatically cleaning up old files, cached data, and temporary content in the background.

## When to Use This

- Clear old cached images and files
- Remove expired data from local databases
- Clean up temporary downloads
- Maintain optimal app storage usage
- Remove old log files

## Quick Implementation

```dart
@pragma('vm:entry-point')
void callbackDispatcher() {
  Workmanager().executeTask((task, inputData) async {
    if (task == "cleanup_task") {
      return await performCleanup();
    }
    return Future.value(false);
  });
}

Future<bool> performCleanup() async {
  try {
    // Clean old cache files
    await _cleanupCache();
    
    // Remove expired database entries
    await _cleanupDatabase();
    
    // Clear temporary files
    await _cleanupTempFiles();
    
    return true;
  } catch (e) {
    print('Cleanup failed: $e');
    return false;
  }
}

void scheduleCleanup() {
  Workmanager().registerPeriodicTask(
    "cleanup_task",
    "cleanup_task",
    frequency: Duration(days: 1), // Daily cleanup
    constraints: Constraints(
      requiresBatteryNotLow: true,
      requiresDeviceIdle: true, // Run when device not busy
    ),
  );
}
```

## Platform Behavior

### Android
- Runs reliably in the background
- Respects device idle constraints
- Can clean up large amounts of data
- Minimum frequency: 15 minutes

### iOS
- Limited to 30 seconds execution time
- Use incremental cleanup approach
- May be deferred if device is busy
- Focus on quick cleanup operations