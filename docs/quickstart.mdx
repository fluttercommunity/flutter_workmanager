---
title: Quick Start
description: "Get started with Flutter Workmanager in minutes"
---

# Quick Start

This guide will help you set up Flutter Workmanager and create your first background task in just a few minutes.

## Installation

Add `workmanager` to your `pubspec.yaml`:

```yaml pubspec.yaml
dependencies:
  workmanager: ^0.8.0
```

Then run:

```bash
flutter pub get
```

<Note>
The platform-specific packages (`workmanager_android`, `workmanager_apple`) are automatically included through the federated plugin system. You don't need to add them manually.
</Note>

## Platform Setup

Before using Workmanager, you need to configure platform-specific settings:

<CardGroup cols={2}>
  <Card title="Android Setup" icon="android" href="/setup/android">
    Configure Android WorkManager
  </Card>
  <Card title="iOS Setup" icon="apple" href="/setup/ios">
    Configure iOS background processing
  </Card>
</CardGroup>

## Basic Usage

Here's a complete example to get you started:

```dart main.dart
import 'package:flutter/material.dart';
import 'package:workmanager/workmanager.dart';

@pragma('vm:entry-point') // Mandatory if the App is obfuscated or using Flutter 3.1+
void callbackDispatcher() {
  Workmanager().executeTask((task, inputData) {
    print("Native called background task: $task"); // simpleTask will be emitted here
    return Future.value(true);
  });
}

void main() {
  // Initialize the plugin
  Workmanager().initialize(
    callbackDispatcher, // The top level function, aka callbackDispatcher
    isInDebugMode: true // If enabled it will post a notification whenever the task is running
  );
  
  // Register a one-off task
  Workmanager().registerOneOffTask("task-identifier", "simpleTask");
  
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Workmanager Example',
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Workmanager Example'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            ElevatedButton(
              onPressed: () {
                Workmanager().registerOneOffTask(
                  "one-off-task",
                  "simpleTask",
                );
              },
              child: Text('Register One-Off Task'),
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: () {
                Workmanager().registerPeriodicTask(
                  "periodic-task",
                  "periodicTask",
                  frequency: Duration(minutes: 15),
                );
              },
              child: Text('Register Periodic Task'),
            ),
          ],
        ),
      ),
    );
  }
}
```

## Key Concepts

<AccordionGroup>
  <Accordion title="Callback Dispatcher">
    The `callbackDispatcher` is a top-level function that executes your background tasks. It must be either a static function or a top-level function to be accessible as a Flutter entry point.
  </Accordion>
  
  <Accordion title="Task Identification">
    - **Android**: Tasks are identified using their `taskName` (second parameter)
    - **iOS**: Tasks are identified using their `taskIdentifier` (first parameter)
    - **iOS Background Fetch**: Use the constant `Workmanager.iOSBackgroundTask`
  </Accordion>
  
  <Accordion title="Separate Isolate">
    The workmanager runs on a separate isolate from the main flutter isolate. Ensure to initialize all dependencies inside the `Workmanager().executeTask`.
  </Accordion>
</AccordionGroup>

## Work Results

Your background task can return three possible outcomes:

<CardGroup cols={3}>
  <Card title="Success" icon="check">
    `Future.value(true)` - Task completed successfully
  </Card>
  <Card title="Retry" icon="arrow-rotate-right">
    `Future.value(false)` - Task needs to be retried
  </Card>
  <Card title="Failure" icon="xmark">
    `Future.error(...)` - Task failed permanently
  </Card>
</CardGroup>

<Info>
On Android, the `BackoffPolicy` configures how WorkManager retries failed tasks. On iOS with BGTaskScheduler, retries need to be scheduled manually.
</Info>

## Debugging Tips

### Enable Debug Mode

When initializing Workmanager, set `isInDebugMode: true` to receive notifications whenever background tasks run:

```dart
Workmanager().initialize(
  callbackDispatcher,
  isInDebugMode: true // Shows notifications for debugging
);
```

### Add Error Handling

Wrap your task code in try-catch blocks:

```dart
@pragma('vm:entry-point')
void callbackDispatcher() {
  Workmanager().executeTask((task, inputData) async {
    try {
      // Your background task code here
      print("Executing task: $task");
      
      // Example: Save data to SharedPreferences
      final prefs = await SharedPreferences.getInstance();
      final count = prefs.getInt('task_count') ?? 0;
      await prefs.setInt('task_count', count + 1);
      
      return Future.value(true);
    } catch (err) {
      print("Task failed: $err");
      return Future.value(false);
    }
  });
}
```

## Next Steps

Now that you have a basic understanding, explore more advanced features:

<CardGroup cols={2}>
  <Card title="Task Types" icon="list" href="/tasks/one-off">
    Learn about different types of background tasks
  </Card>
  <Card title="Constraints" icon="filter" href="/concepts/constraints">
    Configure when tasks should run
  </Card>
  <Card title="Platform Differences" icon="code-compare" href="/platform/differences">
    Understand platform-specific behaviors
  </Card>
  <Card title="Examples" icon="code" href="/examples/basic">
    See more detailed examples
  </Card>
</CardGroup>